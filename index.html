<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Boutique ¬∑ ouaisfi.eu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg: #05060a;
      --bg-alt: #0b0d13;
      --bg-card: #11141e;
      --border-subtle: #1f2433;
      --accent: #a855ff;
      --accent-soft: rgba(168, 85, 255, 0.15);
      --accent-strong: rgba(168, 85, 255, 0.35);
      --accent-alt: #22c55e;
      --text: #e5e7eb;
      --text-soft: #9ca3af;
      --text-softer: #6b7280;
      --danger: #f97373;
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.45);
      --radius-lg: 18px;
      --radius-xl: 22px;
      --radius-pill: 999px;
      --transition-fast: 0.15s ease-out;
      --transition-med: 0.22s ease-out;
    }

    /* Light mode (toggle avec .theme-light sur body) */
    body.theme-light {
      --bg: #f4f4f7;
      --bg-alt: #ffffff;
      --bg-card: #ffffff;
      --border-subtle: #e5e7eb;
      --text: #111827;
      --text-soft: #4b5563;
      --text-softer: #6b7280;
      --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.12);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #111827 0, #020617 55%, #000 100%);
      color: var(--text);
      min-height: 100vh;
    }

    .app-shell {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    @media (min-width: 960px) {
      .app-shell {
        flex-direction: row;
      }
    }

    /* SIDEBAR fa√ßon Obsidian */
    .sidebar {
      background: linear-gradient(160deg, #020617 0, #020617 45%, #050816 100%);
      border-right: 1px solid var(--border-subtle);
      padding: 16px 14px 18px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      box-shadow: 12px 0 42px rgba(0, 0, 0, 0.6);
      z-index: 3;
    }

    @media (min-width: 960px) {
      .sidebar {
        width: 270px;
      }
    }

    @media (max-width: 959.98px) {
      .sidebar {
        border-right: none;
        border-bottom: 1px solid var(--border-subtle);
      }
    }

    .logo-block {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 6px 10px;
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at top left, #111827 0, #020617 55%);
      border: 1px solid rgba(148, 163, 184, 0.15);
    }

    .logo-gem {
      width: 34px;
      height: 34px;
      border-radius: 30% 70% 45% 55%;
      background: conic-gradient(
        from 160deg,
        #22c55e 0,
        #a855ff 30%,
        #0ea5e9 60%,
        #22c55e 100%
      );
      box-shadow:
        0 0 24px rgba(168, 85, 255, 0.6),
        0 0 48px rgba(34, 197, 94, 0.4);
      position: relative;
      overflow: hidden;
    }

    .logo-gem::after {
      content: "";
      position: absolute;
      inset: 18%;
      border-radius: inherit;
      background: radial-gradient(circle at 10% 0%, rgba(255, 255, 255, 0.22), transparent);
      mix-blend-mode: screen;
    }

    .logo-text {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .logo-title {
      font-size: 15px;
      font-weight: 600;
      letter-spacing: 0.03em;
    }

    .logo-sub {
      font-size: 11px;
      color: var(--text-soft);
    }

    .badge-beta {
      font-size: 10px;
      padding: 2px 8px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.35);
      color: var(--text-soft);
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .sidebar-section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-softer);
      margin-bottom: 6px;
      padding: 0 2px;
    }

    .nav-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .nav-item {
      border-radius: 999px;
      font-size: 13px;
      padding: 6px 10px;
      color: var(--text-soft);
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      border: 1px solid transparent;
      transition: background var(--transition-fast), border-color var(--transition-fast),
        color var(--transition-fast), transform var(--transition-fast);
    }

    .nav-item span {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .nav-item-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--border-subtle);
    }

    .nav-item.active {
      background: radial-gradient(circle at top left, var(--accent-soft), transparent);
      border-color: rgba(168, 85, 255, 0.5);
      color: var(--text);
      transform: translateX(2px);
    }

    .nav-item:hover {
      background: rgba(148, 163, 184, 0.06);
      border-color: rgba(148, 163, 184, 0.35);
    }

    .pill-counter {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.4);
    }

    .price-ladder {
      margin-top: 4px;
      padding: 10px 12px;
      border-radius: var(--radius-lg);
      border: 1px dashed rgba(148, 163, 184, 0.4);
      background: radial-gradient(circle at top, #020617 0, #020617 50%, #030712 100%);
      font-size: 11px;
      color: var(--text-softer);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .ladder-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
    }

    .ladder-chip {
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      font-size: 11px;
      white-space: nowrap;
    }

    .ladder-chip.core {
      border-color: rgba(168, 85, 255, 0.8);
      color: #e9d5ff;
      background: rgba(76, 29, 149, 0.45);
    }

    .ladder-chip.nano {
      border-color: rgba(34, 197, 94, 0.7);
      color: #dcfce7;
      background: rgba(22, 163, 74, 0.25);
    }

    .ladder-chip.macro {
      border-color: rgba(234, 179, 8, 0.9);
      color: #fef9c3;
      background: rgba(202, 138, 4, 0.25);
    }

    .sidebar-footer {
      margin-top: auto;
      font-size: 11px;
      color: var(--text-softer);
      border-top: 1px solid var(--border-subtle);
      padding-top: 8px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .sidebar-footer a {
      color: var(--accent-alt);
      text-decoration: none;
      font-size: 11px;
    }

    .sidebar-footer a:hover {
      text-decoration: underline;
    }

    .theme-toggle {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      padding: 4px 10px;
      font-size: 11px;
      cursor: pointer;
      background: rgba(15, 23, 42, 0.9);
    }

    .theme-toggle-dot {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 0, #ffffff, #e5e7eb 30%, #9ca3af 75%);
    }

    body.theme-light .theme-toggle-dot {
      background: radial-gradient(circle at 30% 0, #0f172a, #020617 55%, #0f172a 100%);
    }

    /* MAIN CONTENT */
    .main {
      flex: 1;
      padding: 18px 16px 20px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      max-width: 1200px;
      margin: 0 auto;
    }

    @media (min-width: 960px) {
      .main {
        padding: 24px 32px 32px;
      }
    }

    .top-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      justify-content: space-between;
    }

    .breadcrumbs {
      font-size: 11px;
      color: var(--text-softer);
      text-transform: uppercase;
      letter-spacing: 0.16em;
    }

    .page-title {
      font-size: 24px;
      font-weight: 650;
      letter-spacing: 0.02em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .page-title span.badge {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      border-radius: 999px;
      padding: 2px 8px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: var(--accent-alt);
    }

    /* search + filters */
    .filters-bar {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
    }

    .input-shell {
      flex: 1;
      min-width: 160px;
      display: flex;
      align-items: center;
      gap: 8px;
      border-radius: var(--radius-pill);
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(148, 163, 184, 0.45);
      padding: 6px 10px;
    }

    body.theme-light .input-shell {
      background: #ffffff;
    }

    .input-shell input {
      border: none;
      outline: none;
      background: transparent;
      color: var(--text);
      font-size: 13px;
      width: 100%;
    }

    .input-shell input::placeholder {
      color: var(--text-softer);
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .chip {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-soft);
      cursor: pointer;
      white-space: nowrap;
      transition: background var(--transition-fast), transform var(--transition-fast),
        border-color var(--transition-fast), color var(--transition-fast);
    }

    .chip:hover {
      transform: translateY(-1px);
      background: rgba(15, 23, 42, 0.95);
    }

    .chip.active {
      background: radial-gradient(circle at top, var(--accent-soft), transparent);
      border-color: rgba(168, 85, 255, 0.9);
      color: var(--text);
    }

    select.filter-select {
      font-size: 11px;
      border-radius: 999px;
      padding: 4px 10px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.95);
      color: var(--text-soft);
      outline: none;
    }

    body.theme-light select.filter-select {
      background: #ffffff;
    }

    /* Intro block */
    .intro-card {
      border-radius: var(--radius-xl);
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: radial-gradient(circle at top left, #111827 0, #020617 60%);
      padding: 16px 14px;
      display: grid;
      gap: 14px;
      box-shadow: var(--shadow-soft);
    }

    @media (min-width: 900px) {
      .intro-card {
        grid-template-columns: minmax(0, 1.5fr) minmax(0, 1fr);
        align-items: center;
        padding: 18px 18px;
      }
    }

    body.theme-light .intro-card {
      background: radial-gradient(circle at top left, #ffffff 0, #f3f4f6 60%);
    }

    .intro-main {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .intro-main h2 {
      margin: 0;
      font-size: 16px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: #e5e7eb;
    }

    .intro-main p {
      margin: 0;
      font-size: 13px;
      color: var(--text-soft);
    }

    .intro-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }

    .intro-tag {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: rgba(15, 23, 42, 0.7);
      color: var(--text-soft);
    }

    .intro-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: flex-end;
      font-size: 11px;
    }

    .intro-pill {
      padding: 6px 10px;
      border-radius: 14px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.55);
      display: flex;
      flex-direction: column;
      gap: 2px;
      min-width: 120px;
    }

    .intro-pill strong {
      font-size: 12px;
    }

    /* Product grid */
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 14px;
      margin-top: 6px;
    }

    .product-card {
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.95), #020617);
      padding: 12px 12px 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      box-shadow: 0 14px 32px rgba(15, 23, 42, 0.8);
      position: relative;
      overflow: hidden;
      min-height: 140px;
    }

    body.theme-light .product-card {
      background: radial-gradient(circle at top left, #ffffff, #f3f4f6);
      box-shadow: 0 14px 32px rgba(148, 163, 184, 0.35);
    }

    .product-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top right, rgba(168, 85, 255, 0.18), transparent 55%);
      opacity: 0;
      transition: opacity var(--transition-med);
      pointer-events: none;
    }

    .product-card:hover::before {
      opacity: 1;
    }

    .product-top-row {
      display: flex;
      justify-content: space-between;
      gap: 6px;
      align-items: flex-start;
    }

    .product-title {
      margin: 0;
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 0.02em;
    }

    .product-category {
      font-size: 11px;
      color: var(--text-softer);
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .product-type-badge {
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: var(--text-soft);
      background: rgba(15, 23, 42, 0.9);
      white-space: nowrap;
    }

    .product-desc {
      margin: 0;
      font-size: 12px;
      color: var(--text-soft);
    }

    .product-meta-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      margin-top: 4px;
    }

    .price-tag {
      font-weight: 600;
      font-size: 14px;
      display: flex;
      align-items: baseline;
      gap: 4px;
    }

    .price-tag small {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-softer);
    }

    .price-tag.free {
      color: var(--accent-alt);
    }

    .price-tag.nano {
      color: var(--accent-alt);
    }

    .price-tag.macro {
      color: #facc15;
    }

    .price-badge {
      font-size: 10px;
      padding: 1px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.65);
      color: var(--text-soft);
    }

    .product-actions {
      display: flex;
      justify-content: flex-end;
      gap: 6px;
      margin-top: 6px;
    }

    .btn {
      font-size: 11px;
      border-radius: 999px;
      padding: 5px 10px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      background: rgba(15, 23, 42, 0.95);
      color: var(--text);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      transition: background var(--transition-fast), transform var(--transition-fast),
        box-shadow var(--transition-fast), border-color var(--transition-fast);
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 7px 18px rgba(15, 23, 42, 0.65);
    }

    .btn-primary {
      background: linear-gradient(135deg, #a855ff, #22c55e);
      border-color: transparent;
      box-shadow:
        0 0 22px rgba(168, 85, 255, 0.4),
        0 0 32px rgba(34, 197, 94, 0.35);
    }

    .btn-ghost {
      background: transparent;
    }

    .tags-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-top: 2px;
    }

    .tag {
      font-size: 10px;
      padding: 1px 6px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      color: var(--text-softer);
    }

    .empty-state {
      margin-top: 16px;
      font-size: 13px;
      color: var(--text-softer);
      text-align: center;
      border-radius: 18px;
      padding: 16px;
      border: 1px dashed rgba(148, 163, 184, 0.65);
      background: rgba(15, 23, 42, 0.7);
    }

    body.theme-light .empty-state {
      background: rgba(255, 255, 255, 0.8);
    }
  </style>
</head>
<body class="theme-dark">
  <div class="app-shell">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="logo-block">
        <div class="logo-gem"></div>
        <div class="logo-text">
          <div class="logo-title">ouaisfi.eu ¬∑ Boutique</div>
          <div class="logo-sub">Fichiers, contenus & prestations</div>
        </div>
        <div class="badge-beta">version 0.1</div>
      </div>

      <div>
        <div class="sidebar-section-title">Catalogue</div>
        <ul class="nav-list">
          <li class="nav-item active" data-category="">
            <span>
              <span class="nav-item-dot"></span>
              <span>Tout</span>
            </span>
            <span class="pill-counter" id="count-all">0</span>
          </li>
          <li class="nav-item" data-category="Fichier">
            <span>
              <span class="nav-item-dot"></span>
              <span>Fichiers</span>
            </span>
            <span class="pill-counter" id="count-files">0</span>
          </li>
          <li class="nav-item" data-category="Contenu">
            <span>
              <span class="nav-item-dot"></span>
              <span>Contenus</span>
            </span>
            <span class="pill-counter" id="count-content">0</span>
          </li>
          <li class="nav-item" data-category="Prestation">
            <span>
              <span class="nav-item-dot"></span>
              <span>Prestations</span>
            </span>
            <span class="pill-counter" id="count-services">0</span>
          </li>
        </ul>
      </div>

      <div>
        <div class="sidebar-section-title">√âchelle 12,50</div>
        <div class="price-ladder">
          <div>Une seule logique :</div>
          <div class="ladder-row">
            <span class="ladder-chip nano">0 ‚Ç¨ (gratuit)</span>
            <span class="ladder-chip nano">0,125 ‚Ç¨ (nano)</span>
            <span class="ladder-chip">1,25 ‚Ç¨ (micro)</span>
            <span class="ladder-chip core">12,50 ‚Ç¨ (base)</span>
            <span class="ladder-chip">125,00 ‚Ç¨</span>
            <span class="ladder-chip macro">1.250,00 ‚Ç¨</span>
            <span class="ladder-chip macro">12.500,00 ‚Ç¨</span>
          </div>
          <div>Tout ce que tu vois ici est cal√© sur ces paliers.</div>
        </div>
      </div>

      <div class="sidebar-footer">
        <div>
          <strong>Mode d‚Äôemploi rapide</strong><br />
          Ajoute ou modifie des offres dans le tableau <code>products[]</code> dans le
          JavaScript. Rien d‚Äôautre.
        </div>
        <div class="theme-toggle" id="theme-toggle">
          <div class="theme-toggle-dot"></div>
          <span>Basculer clair / sombre</span>
        </div>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <header class="top-bar">
        <div>
          <div class="breadcrumbs">/ boutique / index.html</div>
          <div class="page-title">
            Boutique modulaire
            <span class="badge">√©chelle 12,50</span>
          </div>
        </div>
      </header>

      <section class="filters-bar">
        <div class="input-shell">
          <span style="font-size: 13px;">üîç</span>
          <input
            type="text"
            id="search-input"
            placeholder="Rechercher un fichier, un contenu ou une prestation..."
          />
        </div>

        <div class="chip-row" id="price-chip-row">
          <button class="chip active" data-price-band="">
            Tous les prix
          </button>
          <button class="chip" data-price-band="free">Gratuit</button>
          <button class="chip" data-price-band="nano">Nano (0,125 ‚Ç¨)</button>
          <button class="chip" data-price-band="micro">Micro (1,25 ‚Ç¨)</button>
          <button class="chip" data-price-band="base">Base (12,50 ‚Ç¨)</button>
          <button class="chip" data-price-band="plus">+ que 12,50 ‚Ç¨</button>
        </div>

        <select class="filter-select" id="sort-select">
          <option value="default">Tri : par logique interne</option>
          <option value="price-asc">Prix croissant</option>
          <option value="price-desc">Prix d√©croissant</option>
          <option value="alpha">Ordre alphab√©tique</option>
        </select>
      </section>

      <section class="intro-card">
        <div class="intro-main">
          <h2>Boutique d‚Äôexp√©rimentation citoyenne</h2>
          <p>
            Une seule base : <strong>12,50&nbsp;‚Ç¨</strong>. Tout le reste en d√©coule,
            du <strong>nano-prix</strong> √† 0,125&nbsp;‚Ç¨ jusqu‚Äôaux
            <strong>prestations premium</strong> √† 12.500&nbsp;‚Ç¨.
          </p>
          <p>
            Fichiers, contenus, accompagnements, ateliers... tout ce qui peut √™tre
            partag√© ou co-construit √† partir du projet est list√© ici.
          </p>
          <div class="intro-tags">
            <span class="intro-tag">Markdown</span>
            <span class="intro-tag">PDF</span>
            <span class="intro-tag">HTML / JS</span>
            <span class="intro-tag">Ateliers en ligne</span>
            <span class="intro-tag">Coaching</span>
          </div>
        </div>
        <div class="intro-grid">
          <div class="intro-pill">
            <span style="font-size:10px; text-transform:uppercase; letter-spacing:.16em; color:var(--text-softer);">
              Palier central
            </span>
            <strong>12,50&nbsp;‚Ç¨</strong>
            <span>La brique de base pour la majorit√© des petits contenus.</span>
          </div>
          <div class="intro-pill">
            <span style="font-size:10px; text-transform:uppercase; letter-spacing:.16em; color:var(--text-softer);">
              Prestations longues
            </span>
            <strong>125&nbsp;‚Ç¨ ‚Üí 12.500&nbsp;‚Ç¨</strong>
            <span>Pour les parcours, accompagnements, grosses missions.</span>
          </div>
        </div>
      </section>

      <section>
        <div id="product-grid" class="product-grid"></div>
        <div id="empty-state" class="empty-state" style="display:none;">
          Aucun r√©sultat ne correspond √† ta recherche / filtres.<br />
          Essaie avec moins de filtres ou un mot-cl√© plus large.
        </div>
      </section>
    </main>
  </div>

  <script>
    /*
      ============================
      CONFIG PRODUITS
      ============================
      Tu peux ajouter/supprimer/modifier des entr√©es dans le tableau products ci-dessous.

      Champs utilis√©s :
      - id           : identifiant interne (unique)
      - title        : nom court de l‚Äôoffre
      - category     : "Fichier", "Contenu" ou "Prestation"
      - type         : sous-type, affiche dans un badge (Pack, Atelier, Coaching...)
      - price        : nombre en euros (0, 0.125, 1.25, 12.5, 125, 1250, 12500, etc.)
      - priceBand    : "free" | "nano" | "micro" | "base" | "plus"
      - description  : texte court
      - tags         : tableau de mots-cl√©s
      - format       : ce qui est livr√© (PDF, .md, vid√©o, mixte...)
      - delivery     : "T√©l√©chargement", "Visio", "Pr√©sentiel", etc.
    */

    let products = [];

// Charger les produits depuis products.json
fetch('products.json')
  .then(response => response.json())
  .then(data => {
    products = data;
    computeCounters();
    applyFilters();
  })
  .catch(err => {
    console.error('Erreur de chargement de products.json', err);
  });


    // DOM refs
    const productGrid = document.getElementById("product-grid");
    const emptyState = document.getElementById("empty-state");
    const searchInput = document.getElementById("search-input");
    const sortSelect = document.getElementById("sort-select");
    const navItems = document.querySelectorAll(".nav-item");
    const priceChips = document.querySelectorAll("#price-chip-row .chip");
    const themeToggle = document.getElementById("theme-toggle");

    // Counters
    const countAll = document.getElementById("count-all");
    const countFiles = document.getElementById("count-files");
    const countContent = document.getElementById("count-content");
    const countServices = document.getElementById("count-services");

    // State
    let selectedCategory = "";
    let selectedPriceBand = "";
    let searchQuery = "";
    let sortMode = "default";

    function formatPrice(eur) {
      if (eur === 0) {
        return "Gratuit";
      }
      return eur.toLocaleString("fr-BE", {
        style: "currency",
        currency: "EUR",
        minimumFractionDigits: eur < 1 ? 3 : 2
      });
    }

    function priceTagClass(p) {
      if (p === 0) return "free";
      if (p <= 0.125) return "nano";
      if (p >= 1250) return "macro";
      return "";
    }

    function computeCounters() {
      countAll.textContent = products.length;
      countFiles.textContent = products.filter(
        (p) => p.category === "Fichier"
      ).length;
      countContent.textContent = products.filter(
        (p) => p.category === "Contenu"
      ).length;
      countServices.textContent = products.filter(
        (p) => p.category === "Prestation"
      ).length;
    }

    function applyFilters() {
      let filtered = products.slice();

      if (selectedCategory) {
        filtered = filtered.filter((p) => p.category === selectedCategory);
      }

      if (selectedPriceBand) {
        if (selectedPriceBand === "plus") {
          filtered = filtered.filter((p) => p.priceBand === "plus");
        } else {
          filtered = filtered.filter((p) => p.priceBand === selectedPriceBand);
        }
      }

      if (searchQuery.trim()) {
        const q = searchQuery.trim().toLowerCase();
        filtered = filtered.filter((p) => {
          const haystack = (
            p.title +
            " " +
            p.description +
            " " +
            p.type +
            " " +
            p.tags.join(" ")
          ).toLowerCase();
          return haystack.includes(q);
        });
      }

      if (sortMode === "price-asc") {
        filtered.sort((a, b) => a.price - b.price);
      } else if (sortMode === "price-desc") {
        filtered.sort((a, b) => b.price - a.price);
      } else if (sortMode === "alpha") {
        filtered.sort((a, b) => a.title.localeCompare(b.title, "fr"));
      }

      renderProducts(filtered);
    }

    function renderProducts(list) {
      productGrid.innerHTML = "";
      if (!list.length) {
        emptyState.style.display = "block";
        return;
      }
      emptyState.style.display = "none";

      list.forEach((p) => {
        const card = document.createElement("article");
        card.className = "product-card";

        const topRow = document.createElement("div");
        topRow.className = "product-top-row";

        const titleBlock = document.createElement("div");
        const title = document.createElement("h3");
        title.className = "product-title";
        title.textContent = p.title;
        const cat = document.createElement("div");
        cat.className = "product-category";
        cat.textContent = p.category;

        titleBlock.appendChild(title);
        titleBlock.appendChild(cat);

        const typeBadge = document.createElement("div");
        typeBadge.className = "product-type-badge";
        typeBadge.textContent = p.type;

        topRow.appendChild(titleBlock);
        topRow.appendChild(typeBadge);

        const desc = document.createElement("p");
        desc.className = "product-desc";
        desc.textContent = p.description;

        const tagsRow = document.createElement("div");
        tagsRow.className = "tags-row";
        if (p.format) {
          const f = document.createElement("span");
          f.className = "tag";
          f.textContent = p.format;
          tagsRow.appendChild(f);
        }
        if (p.delivery) {
          const d = document.createElement("span");
          d.className = "tag";
          d.textContent = p.delivery;
          tagsRow.appendChild(d);
        }
        p.tags.forEach((t) => {
          const tag = document.createElement("span");
          tag.className = "tag";
          tag.textContent = t;
          tagsRow.appendChild(tag);
        });

        const metaRow = document.createElement("div");
        metaRow.className = "product-meta-row";

        const price = document.createElement("div");
        const priceClass = priceTagClass(p.price);
        price.className = "price-tag" + (priceClass ? " " + priceClass : "");

        const priceValue = document.createElement("span");
        priceValue.textContent = formatPrice(p.price);
        price.appendChild(priceValue);

        const priceHint = document.createElement("small");
        if (p.priceBand === "free") priceHint.textContent = "partage libre";
        else if (p.priceBand === "nano") priceHint.textContent = "nano-palier";
        else if (p.priceBand === "micro") priceHint.textContent = "micro-palier";
        else if (p.priceBand === "base") priceHint.textContent = "palier 12,50";
        else priceHint.textContent = "palier sup√©rieur";
        price.appendChild(priceHint);

        const priceBadge = document.createElement("div");
        priceBadge.className = "price-badge";
        priceBadge.textContent = `Palier : ${p.price}`;

        metaRow.appendChild(price);
        metaRow.appendChild(priceBadge);

        const actions = document.createElement("div");
        actions.className = "product-actions";

        const btnPrimary = document.createElement("button");
        btnPrimary.className = "btn btn-primary";
        btnPrimary.textContent = p.price === 0 ? "T√©l√©charger / demander" : "Manifester son int√©r√™t";
        btnPrimary.addEventListener("click", () => {
          const subject = encodeURIComponent(`[Boutique] ${p.title}`);
          const body = encodeURIComponent(
            `Bonjour,\n\nJe suis int√©ress√©¬∑e par : "${p.title}"\n\nPalier : ${formatPrice(
              p.price
            )} (id: ${p.id})\n\nExplique-moi les modalit√©s (format, planning, etc.).\n\nMerci !`
          );
          window.location.href = `mailto:?subject=${subject}&body=${body}`;
        });

        const btnGhost = document.createElement("button");
        btnGhost.className = "btn btn-ghost";
        btnGhost.textContent = "D√©tails";
        btnGhost.addEventListener("click", () => {
          alert(
            `${p.title}\n\n${p.description}\n\nPrix : ${formatPrice(p.price)}\nFormat : ${
              p.format || "‚Äî"
            }\nLivraison : ${p.delivery || "‚Äî"}`
          );
        });

        actions.appendChild(btnPrimary);
        actions.appendChild(btnGhost);

        card.appendChild(topRow);
        card.appendChild(desc);
        card.appendChild(tagsRow);
        card.appendChild(metaRow);
        card.appendChild(actions);

        productGrid.appendChild(card);
      });
    }

    // Events
    navItems.forEach((item) => {
      item.addEventListener("click", () => {
        navItems.forEach((i) => i.classList.remove("active"));
        item.classList.add("active");
        selectedCategory = item.dataset.category || "";
        applyFilters();
      });
    });

    priceChips.forEach((chip) => {
      chip.addEventListener("click", () => {
        priceChips.forEach((c) => c.classList.remove("active"));
        chip.classList.add("active");
        selectedPriceBand = chip.dataset.priceBand || "";
        applyFilters();
      });
    });

    searchInput.addEventListener("input", (e) => {
      searchQuery = e.target.value;
      applyFilters();
    });

    sortSelect.addEventListener("change", (e) => {
      sortMode = e.target.value;
      applyFilters();
    });

    // Theme toggle
    themeToggle.addEventListener("click", () => {
      document.body.classList.toggle("theme-light");
    });


  </script>
</body>
</html>
